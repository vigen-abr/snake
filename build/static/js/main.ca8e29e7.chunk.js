(window.webpackJsonp=window.webpackJsonp||[]).push([[0],[,,,,,,,,,,,function(t,e,n){t.exports=n(21)},,,,,,function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){"use strict";n.r(e);var i=n(0),r=n.n(i),a=n(5),o=n.n(a),s=(n(17),n(1)),c=n(2),l=n(6),u=n(7),h=n(9),f=n(8),p=n(3),v=n(10);n(18),n(19);var d=function(t){return r.a.createElement("div",{className:"game-wrapper__pixel",style:{top:"".concat(t.top,"px"),left:"".concat(t.left,"px"),width:"".concat(t.size,"px"),height:"".concat(t.size,"px")}})};n(20);var g,m=function(t){return r.a.createElement("div",{className:"game-wrapper__target-pixel",style:{top:"".concat(t.top,"px"),left:"".concat(t.left,"px"),width:"".concat(t.size,"px"),height:"".concat(t.size,"px")}})},w=0,x=0,y=0;function k(t){return{top:0,left:w+=t,_index:++x}}function _(t,e){return t=Math.ceil(t),e=Math.floor(e),Math.floor(Math.random()*(e-t+1))+t}!function(t){t.UP="UP",t.DOWN="DOWN",t.LEFT="LEFT",t.RIGHT="RIGHT"}(g||(g={}));var T=function(t){function e(t){var n;return Object(l.a)(this,e),(n=Object(h.a)(this,Object(f.a)(e).call(this,t))).state=void 0,n.moveIntervalId=void 0,n.targetsIntervalId=void 0,n.ongoingDirection=void 0,n.state={pixels:[],targets:[],direction:g.RIGHT,gameOver:!1},n.handleKeyDown=n.handleKeyDown.bind(Object(p.a)(n)),document.addEventListener("keydown",n.handleKeyDown),n}return Object(v.a)(e,t),Object(u.a)(e,[{key:"render",value:function(){return[i.createElement("div",{key:"2",className:"game-wrapper ".concat(this.state.gameOver?"game-wrapper--game-over":""),style:{width:"".concat(400,"px"),height:"".concat(400,"px")}},this.state.targets.length,this.state.pixels.map(function(t,e){return i.createElement(d,{key:e,size:20,top:t.top,left:t.left})}),this.state.targets.map(function(t,e){return i.createElement(m,{key:e,size:20,top:t.top,left:t.left})}))]}},{key:"handleKeyDown",value:function(t){t.preventDefault();var e=this._mapEventToDirection(t);e&&(this.ongoingDirection=e)}},{key:"_mapEventToDirection",value:function(t){switch(t.key){case"ArrowUp":return{correct:g.UP,reverse:g.DOWN};case"ArrowRight":return{correct:g.RIGHT,reverse:g.LEFT};case"ArrowDown":return{correct:g.DOWN,reverse:g.UP};case"ArrowLeft":return{correct:g.LEFT,reverse:g.RIGHT};default:return!1}}},{key:"componentDidMount",value:function(){this._initFirstPixel(),this.setIntervals()}},{key:"_initFirstPixel",value:function(){var t=Object(c.a)(this.state.pixels);t.unshift(k(20)),t.unshift(k(20)),t.unshift(k(20)),t.unshift(k(20)),t.unshift(k(20)),t.unshift(k(20)),t.unshift(k(20)),this.setState({pixels:t})}},{key:"_updatePixelPositions",value:function(){var t=this,e=Object(c.a)(this.state.pixels).reduce(function(e,n){var i=Object(s.a)({},n);if(e.previous){var r=Object(s.a)({},e.previous);e.previous=Object(s.a)({},i),i=Object(s.a)({},i,{top:r.top,left:r.left})}else e.previous=Object(s.a)({},i),t._movePixel(i);return e.pixels.push(i),e},{pixels:[]}),n=e.pixels[0];if(this._hasBorderConflict(n))return this._onGameOver();if(this._hasSelfConflict(n))return this._onGameOver();if(this.state.targets.length,this.hasTargets){var i=this._hitTheTarget(n);i>=0&&this.onTargetHit(i)}this.setState({pixels:e.pixels})}},{key:"onTargetHit",value:function(t){var e=Object(c.a)(this.state.targets);e.splice(t,1),this.setState({targets:e})}},{key:"_updateDirection",value:function(){this.ongoingDirection&&this.ongoingDirection.reverse!==this.state.direction&&(this.setState({direction:this.ongoingDirection.correct}),delete this.ongoingDirection)}},{key:"_onGameOver",value:function(){this.setState({gameOver:!0}),window.clearInterval(this.moveIntervalId),window.clearInterval(this.targetsIntervalId),document.removeEventListener("keydown",this.handleKeyDown)}},{key:"_hasBorderConflict",value:function(t){return t.top+20>400||t.top<0||t.left<0||t.left+20>400}},{key:"_hasSelfConflict",value:function(t){return this.state.pixels.some(function(e){return e.top===t.top&&e.left===t.left})}},{key:"_hitTheTarget",value:function(t){return this.state.targets.findIndex(function(e){return e.top===t.top&&e.left===t.left})}},{key:"_movePixel",value:function(t){switch(this.state.direction){case g.UP:t.top-=20;break;case g.RIGHT:t.left+=20;break;case g.DOWN:t.top+=20;break;case g.LEFT:t.left-=20;break;default:throw new Error("Unknown direction ".concat(this.state.direction))}return t}},{key:"setIntervals",value:function(){var t=this;this.moveIntervalId=window.setInterval(function(){t._updateDirection(),t._updatePixelPositions()},300),this.targetsIntervalId=window.setInterval(function(){t.needsTarget&&t.setState({targets:[].concat(Object(c.a)(t.state.targets),[t._generateValidTarget()])})},500)}},{key:"_generateValidTarget",value:function(){var t,e,n={top:_(0,(e=400)/(t=20)-1)*t,left:_(0,e/t-1)*t,_index:++y};return console.log(n),this._isValidTarget(n)?n:this._generateValidTarget()}},{key:"_isValidTarget",value:function(t){return!(this.state.pixels.some(function(e){return e.top===t.top&&e.left===t.left})||this.state.targets.some(function(e){return e.top===t.top&&e.left===t.left}))}},{key:"needsTarget",get:function(){return Math.random()>=.9}},{key:"hasTargets",get:function(){return!!this.state.targets.length}}]),e}(i.Component);var I=function(){return r.a.createElement("div",{className:"app"},r.a.createElement(T,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(I,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(t){t.unregister()})}],[[11,1,2]]]);
//# sourceMappingURL=main.ca8e29e7.chunk.js.map
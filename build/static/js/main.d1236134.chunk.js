(window.webpackJsonp=window.webpackJsonp||[]).push([[0],[,,,,,,,,,,,function(e,t,n){e.exports=n(22)},,,,,,function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){"use strict";n.r(t);var i=n(0),a=n.n(i),r=n(5),o=n.n(r),s=(n(17),n(1)),c=n(2),l=n(6),u=n(7),p=n(9),h=n(8),f=n(3),v=n(10);n(18),n(19);var d=function(e){return a.a.createElement("div",{className:"game-wrapper__pixel",style:{top:"".concat(e.top,"px"),left:"".concat(e.left,"px"),width:"".concat(e.size,"px"),height:"".concat(e.size,"px")}})};n(20);var g=function(e){return a.a.createElement("div",{className:"game-wrapper__target-pixel",style:{top:"".concat(e.top,"px"),left:"".concat(e.left,"px"),width:"".concat(e.size,"px"),height:"".concat(e.size,"px")}})};n(21);var m,w=function(e){return a.a.createElement("div",{className:"game-wrapper__complexity-wrapper",style:{}},a.a.createElement("div",{className:"game-wrapper__complexity-wrapper__complexity-indicator"}))},x=0,y=0,_=0;function k(e,t){return{top:t?t.top:0,left:t?t.left:x+=e,_index:++y}}function T(e,t){return e=Math.ceil(e),t=Math.floor(t),Math.floor(Math.random()*(t-e+1))+e}!function(e){e.UP="UP",e.DOWN="DOWN",e.LEFT="LEFT",e.RIGHT="RIGHT"}(m||(m={}));var I=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(p.a)(this,Object(h.a)(t).call(this,e))).state=void 0,n.moveIntervalId=void 0,n.targetsIntervalId=void 0,n.ongoingDirection=void 0,n.loopCounter=0,n.complexity=1,n.state={pixels:[],targets:[],direction:m.RIGHT,gameOver:!1},n.handleKeyDown=n.handleKeyDown.bind(Object(f.a)(n)),document.addEventListener("keydown",n.handleKeyDown),n}return Object(v.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return[i.createElement("div",{className:"game-wrapper ".concat(this.state.gameOver?"game-wrapper--game-over":""),style:{width:"".concat(400,"px"),height:"".concat(400,"px")}},this.state.pixels.map(function(e,t){return i.createElement(d,{key:t,size:20,top:e.top,left:e.left})}),this.state.targets.map(function(e,t){return i.createElement(g,{key:t,size:20,top:e.top,left:e.left})})),i.createElement(w,null)]}},{key:"handleKeyDown",value:function(e){e.preventDefault();var t=this._mapEventToDirection(e);t&&(this.ongoingDirection=t)}},{key:"_mapEventToDirection",value:function(e){switch(e.key){case"ArrowUp":return{correct:m.UP,reverse:m.DOWN};case"ArrowRight":return{correct:m.RIGHT,reverse:m.LEFT};case"ArrowDown":return{correct:m.DOWN,reverse:m.UP};case"ArrowLeft":return{correct:m.LEFT,reverse:m.RIGHT};default:return!1}}},{key:"componentDidMount",value:function(){this._initFirstPixel(),this.setIntervals()}},{key:"_initFirstPixel",value:function(){var e=Object(c.a)(this.state.pixels);e.unshift(k(20)),e.unshift(k(20)),e.unshift(k(20)),e.unshift(k(20)),e.unshift(k(20)),e.unshift(k(20)),e.unshift(k(20)),this.setState({pixels:e})}},{key:"_updatePixelPositions",value:function(){var e=this,t=Object(c.a)(this.state.pixels).reduce(function(t,n){var i=Object(s.a)({},n);if(t.previous){var a=Object(s.a)({},t.previous);t.previous=Object(s.a)({},i),i=Object(s.a)({},i,{top:a.top,left:a.left})}else t.previous=Object(s.a)({},i),e._movePixel(i);return t.pixels.push(i),t},{pixels:[]}),n=t.pixels[0];if(this._hasBorderConflict(n))return this._onGameOver();if(this._hasSelfConflict(n))return this._onGameOver();if(this.state.targets.length,this.hasTargets){var i=this._hitTheTarget(n);i>=0&&(this.onTargetHit(i),this._appendPixelToEnd(t.pixels))}this.setState({pixels:t.pixels})}},{key:"_appendPixelToEnd",value:function(e){var t=this.state.pixels[this.state.pixels.length-1];e.push(k(20,t))}},{key:"onTargetHit",value:function(e){var t=Object(c.a)(this.state.targets);t.splice(e,1),this.setState({targets:t})}},{key:"_updateDirection",value:function(){this.ongoingDirection&&this.ongoingDirection.reverse!==this.state.direction&&(this.setState({direction:this.ongoingDirection.correct}),delete this.ongoingDirection)}},{key:"_onGameOver",value:function(){this.setState({gameOver:!0}),window.clearInterval(this.moveIntervalId),window.clearInterval(this.targetsIntervalId),document.removeEventListener("keydown",this.handleKeyDown)}},{key:"_hasBorderConflict",value:function(e){return e.top+20>400||e.top<0||e.left<0||e.left+20>400}},{key:"_hasSelfConflict",value:function(e){return this.state.pixels.some(function(t){return t.top===e.top&&t.left===e.left})}},{key:"_hitTheTarget",value:function(e){return this.state.targets.findIndex(function(t){return t.top===e.top&&t.left===e.left})}},{key:"_movePixel",value:function(e){switch(this.state.direction){case m.UP:e.top-=20;break;case m.RIGHT:e.left+=20;break;case m.DOWN:e.top+=20;break;case m.LEFT:e.left-=20;break;default:throw new Error("Unknown direction ".concat(this.state.direction))}return e}},{key:"setIntervals",value:function(){var e=this;this.moveIntervalId=window.setInterval(function(){e.loopCounter++,e.loopCounter%(10-e.complexity)===0&&(e._updateDirection(),e._updatePixelPositions())},50),this.targetsIntervalId=window.setInterval(function(){e.needsTarget&&e.setState({targets:[].concat(Object(c.a)(e.state.targets),[e._generateValidTarget()])})},500)}},{key:"_generateValidTarget",value:function(){var e,t,n={top:T(0,(t=400)/(e=20)-1)*e,left:T(0,t/e-1)*e,_index:++_};return this._isValidTarget(n)?n:this._generateValidTarget()}},{key:"_isValidTarget",value:function(e){return!(this.state.pixels.some(function(t){return t.top===e.top&&t.left===e.left})||this.state.targets.some(function(t){return t.top===e.top&&t.left===e.left}))}},{key:"needsTarget",get:function(){return Math.random()>=.9}},{key:"hasTargets",get:function(){return!!this.state.targets.length}}]),t}(i.Component);var O=function(){return a.a.createElement("div",{className:"app"},a.a.createElement(I,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(a.a.createElement(O,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}],[[11,1,2]]]);
//# sourceMappingURL=main.d1236134.chunk.js.map